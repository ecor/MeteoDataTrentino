
R version 3.3.0 (2016-05-03) -- "Supposedly Educational"
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> #!/usr/bin/env Rscript
> # file appendSmetData.R
> #
> # This file contains instructions for creating SMET files with weather data of Trentino
> #
> # author: Emanuele Cordano on 21-05-2015
> 
> #This program is free software: you can redistribute it and/or modify
> #it under the terms of the GNU General Public License as published by
> #the Free Software Foundation, either version 3 of the License, or
> #(at your option) any later version.
> #
> #This program is distributed in the hope that it will be useful,
> #but WITHOUT ANY WARRANTY; without even the implied warranty of
> #MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> #GNU General Public License for more details.
> #
> #You should have received a copy of the GNU General Public License
> #along with this program.  If not, see <http://www.gnu.org/licenses/>.
> 
> ###############################################################################
> rm(list=ls())
> 
> library(MeteoDataTrentino)
Loading required package: XML
Loading required package: stringr
Loading required package: sp
Loading required package: RSMET
> library(RSMET)
> 
> 
> 
> 
> oldsmetdir <- '/home/ecor/local/MeteoDataTrentino/inst/smet' 
> 
> appendsmet_dir <- oldsmetdir ###'/home/ecor/Dropbox/R-packages/MeteoDataBayern/inst/a_smet'
> 
> 
> # TO DO 
> #newsmet <- getMeteoDataPiemonte(x=getPiemonteJSON(destfile=jsonfile))
> 
> metadata <- getMetaDataTrentino(return.type="list")
'data.frame':	206 obs. of  11 variables:
 $ station_id       : chr  "T0154" "T0405" "T0153" "T0146" ...
 $ station_name     : chr  "Ala (Convento)" "Ala (Maso Le Pozze)" "Ala (Ronchi)" "Aldeno (San Zeno)" ...
 $ station_shortname: chr  "Ala Convento" "SM Ala Maso Le Pozze" "SM Ala Ronchi" "SM Aldeno San Zeno" ...
 $ altitude         : num  165 170 692 182 91 115 85 698 710 843 ...
 $ latitude         : num  45.8 45.8 45.7 46 45.9 ...
 $ longitude        : num  11 11 11.1 11.1 10.9 ...
 $ x                : num  655530 657305 660674 662061 646623 ...
 $ y                : num  5069007 5072278 5067150 5092600 5087182 ...
 $ location         : chr  "Ala (Convento)" "Ala (Maso Le Pozze)" "Ala (Ronchi)" "Aldeno (San Zeno)" ...
 $ y_               : num  45.8 45.8 45.7 46 45.9 ...
 $ x_               : num  11 11 11.1 11.1 10.9 ...
Maximum error coordinate: 387.002022 along x and 109.986139 along y!
    station_id                station_name    station_shortname altitude
14       T0443 Brentonico (Santa Caterina)  SM Brentonico S. C.      727
18       T0323          Campodenno (frana) MTX Campodenno frana      610
21       T0445     Canazei (Coi de Paussa)   SEBA Coi de Paussa     2376
22       T0421                      Caoria            SM Caoria      803
26       T0418 Castelfondo (Malga Castrin)     SM Malga Castrin     1815
38       T0160           Cimego (Centrale)      Cimego Centrale      490
104      T0008                  Paneveggio     IASMA Paneveggio     1540
111      T0082               Passo Mendola     SM Passo Mendola     1315
113      T0103                 Passo Rolle       SM Passo Rolle     2012
124      T0380 Pian Palu' (Malga Giumella)    SM Malga Giumella     1945
139      T0076        Rabbi (San Bernardo)          S. Bernardo     1132
146      T0147                    Rovereto          SM Rovereto      203
198      T0364 Vermiglio (Capanna Presena) SEBA Capanna Presena     2730
    latitude longitude        x       y                    location       x_
14  45.82393  10.95981 652226.0 5076359 Brentonico (Santa Caterina) 652232.7
18  46.25978  11.02838 656324.0 5124913          Campodenno (frana) 656324.0
21  46.47196  11.84901 718717.0 5150433     Canazei (Coi de Paussa) 718717.4
22  46.19188  11.68384 707093.3 5118869                      Caoria 707093.0
26  46.51037  11.04392 656802.0 5152784 Castelfondo (Malga Castrin) 656802.0
38  45.92035  10.62704 626142.0 5086558           Cimego (Centrale) 626165.4
104 46.30952  11.74751 711553.0 5132108                  Paneveggio 711553.0
111 46.41918  11.18934 668238.0 5142951               Passo Mendola 668238.7
113 46.29797  11.78697 714636.0 5130930                 Passo Rolle 714636.4
124 46.34087  10.61249 624098.1 5133198 Pian Palu' (Malga Giumella) 624088.8
139 46.40048  10.84439 642167.0 5140308        Rabbi (San Bernardo) 641780.0
146 45.89644  11.04379 658565.0 5084532                    Rovereto 658549.0
198 46.22799  10.58013 621741.0 5120602 Vermiglio (Capanna Presena) 621849.0
         y_         err
14  5076353   8.8890352
18  5124911   1.9588723
21  5150432   0.8004706
22  5118868   1.0272601
26  5152785   1.1112286
38  5086485  76.3916543
104 5132107   0.7005232
111 5142952   1.0901628
113 5130930   0.5297450
124 5133185  16.1257307
139 5140198 402.3276221
146 5084572  43.0963227
198 5120593 108.3710387
Warning messages:
1: In readLines(url) :
  incomplete final line found on 'http://dati.meteotrentino.it/service.asmx/listaStazioni'
2: In getMetaDataTrentino(return.type = "list") :
  In the above station, error exceeds 0.500000 meters! 
> 
> nn <- names(metadata)[!(names(metadata) %in% c("T0365"))]
> 
> 
> newsmet <- getMeteoDataTrentino(station=metadata[nn])
Importing T0154 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0154
Importing T0405 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0405
Importing T0153 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0153
Importing T0146 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0146
Importing T0192 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0192
Importing T0322 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0322
Importing T0401 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0401
Importing T0204 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0204
Importing T0402 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0402
Importing T0015 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0015
Importing T0222 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0222
Importing T0152 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0152
Importing T0155 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0155
Importing T0443 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0443
Importing T0415 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0415
Importing T0231 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0231
Importing T0229 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0229
Importing T0323 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0323
Importing T0030 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0030
Importing T0437 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0437
Importing T0445 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0445
Importing T0421 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0421
Importing T0029 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0029
Importing T0431 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0431
Importing T0065 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0065
Importing T0418 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0418
Importing T0224 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0224
Importing T0469 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0469
Importing T0367 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0367
Importing T0107 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0107
Importing T0118 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0118
Importing T0009 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0009
Importing T0227 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0227
Importing T0099 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0099
Importing T0262 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0262
Importing T0377 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0377
Importing T0160 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0160
Importing T0083 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0083
Importing T0397 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0397
Importing T0068 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0068
Importing T0017 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0017
Importing T0156 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0156
Importing T0157 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0157
Importing T0158 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0158
Importing T0373 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0373
Importing T0410 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0410
Importing T0233 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0233
Importing T0086 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0086
Importing T0382 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0382
Importing T0379 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0379
Importing T0210 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0210
Importing T0399 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0399
Importing T0080 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0080
Importing T0237 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0237
Importing T0105 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0105
Importing T0203 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0203
Importing T0473 ...  url: http://dati.meteotrentino.it/service.asmx/ultimiDatiStazione?codice=T0473
Error in if (tzv >= 0) { : missing value where TRUE/FALSE needed
Calls: getMeteoDataTrentino -> lapply -> FUN -> as.smet -> as.smet -> .local
In addition: There were 50 or more warnings (use warnings() to see the first 50)
Execution halted
